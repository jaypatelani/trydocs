<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Chapter 12. Package components - files, directories and contents</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<style>

.previous {
    text-decoration: none;
    display: inline-block;
    padding: 9px 16px;
    background-color: #f1f1f1;
    color: black;
}
.index {
    text-decoration: none;
    display: inline-block;
    padding: 9px 16px;
    background-color: #f1f1f1;
    color: black;

}
.next {
    text-decoration: none;
    display: inline-block;
    padding: 9px 16px;
    background-color: #FF4500;
    color: white;
    float: right !important;}

#myBtn {
  #display: none; /* Hidden by default */
  position: fixed; /* Fixed/sticky position */
  bottom: 20px; /* Place the button at the bottom of the page */
  right: 30px; /* Place the button 30px from the right */
  z-index: 99; /* Make sure it does not overlap */
  border: none; /* Remove borders */
  outline: none; /* Remove outline */
  background-color: #FF4500; /* Set a background color */
  color: white; /* Text color */
  cursor: pointer; /* Add a mouse pointer on hover */
  padding: 15px; /* Some padding */
  border-radius: 10px; /* Rounded corners */
  font-size: 18px; /* Increase font size */
}

#myBtn:hover {
  background-color: #555; /* Add a dark-grey background on hover */
}

</style>
<script>
//Get the button
var mybutton = document.getElementById("myBtn");

// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}

// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>


<a href="https://jaypatelani.github.io/trydocs/pkgsrc/chapter-11.html" class="previous">&laquo; Previous</a>
<a href="https://jaypatelani.github.io/trydocs/pkgsrc/index.html" class="previous">&laquo; Index</a>
<a href="https://jaypatelani.github.io/trydocs/pkgsrc/chapter-13.html" class="next">Next &raquo;</a>

<button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
<div id="header">
<h1>Chapter 12. Package components - files, directories and contents</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_12_1_makefile">12.1. Makefile</a></li>
<li><a href="#_12_2_distinfo">12.2. distinfo</a></li>
<li><a href="#_12_3_patches">12.3. patches/*</a>
<ul class="sectlevel2">
<li><a href="#_12_3_1_structure_of_a_single_patch_file">12.3.1. Structure of a single patch file</a></li>
<li><a href="#_12_3_2_creating_patch_files">12.3.2. Creating patch files</a></li>
<li><a href="#_12_3_3_sources_where_the_patch_files_come_from">12.3.3. Sources where the patch files come from</a></li>
<li><a href="#_12_3_4_patching_guidelines">12.3.4. Patching guidelines</a></li>
<li><a href="#_12_3_5_feedback_to_the_author">12.3.5. Feedback to the author</a></li>
</ul>
</li>
<li><a href="#_12_4_other_mandatory_files">12.4. Other mandatory files</a></li>
<li><a href="#_12_5_optional_files">12.5. Optional files</a>
<ul class="sectlevel2">
<li><a href="#_12_5_1_files_affecting_the_binary_package">12.5.1. Files affecting the binary package</a></li>
<li><a href="#_12_5_2_files_affecting_the_build_process">12.5.2. Files affecting the build process</a></li>
<li><a href="#_12_5_3_files_affecting_nothing_at_all">12.5.3. Files affecting nothing at all</a></li>
</ul>
</li>
<li><a href="#_12_6_work">12.6. work*</a></li>
<li><a href="#_12_7_files">12.7. files/*</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Whenever you&#8217;re preparing a package, there are a number of files involved which are described in the following sections.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_12_1_makefile">12.1. Makefile</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Building, installation and creation of a binary package are all controlled by the package&#8217;s <code>Makefile</code>. The <code>Makefile</code> describes various things about a package, for example from where to get it, how to configure, build, and install it.</p>
</div>
<div class="paragraph">
<p>A package <code>Makefile</code> contains several sections that describe the package.</p>
</div>
<div class="paragraph">
<p>In the first section there are the following variables, which should appear exactly in the order given here. The order and grouping of the variables is mostly historical and has no further meaning.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>DISTNAME</code> is the basename of the distribution file to be downloaded from the package&#8217;s website.</p>
</li>
<li>
<p><code>PKGNAME</code> is the name of the package, as used by pkgsrc. You need to provide it if <code>DISTNAME</code> (which is the default) is not a good name for the package in pkgsrc or <code>DISTNAME</code> is not provided (no distribution file is required). Usually it is the pkgsrc directory name together with the version number. It must match the regular expression <code>^[A-Za-z0-9][A-Za-z0-9-_.+]*$</code>, that is, it starts with a letter or digit, and contains only letters, digits, dashes, underscores, dots and plus signs. New packages should have entirely lower-case names, with the exception of some that must follow pre-existing conventions (e.g. R packages begin with <code>R-</code>). You can use the <code>:tl</code> variable modifier to lower-case the package name.</p>
</li>
<li>
<p><code>CATEGORIES</code> is a list of categories which the package fits in. You can choose any of the top-level directories of pkgsrc for it.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Currently the following values are available for <code>CATEGORIES</code>. If more than one is used, they need to be separated by spaces:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>archivers     cross         geography     meta-pkgs     security
audio         databases     graphics      misc          shells
benchmarks    devel         ham           multimedia    sysutils
biology       editors       inputmethod   net           textproc
cad           emulators     lang          news          time
chat          finance       mail          parallel      wm
comms         fonts         math          pkgtools      www
converters    games         mbone         print         x11</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>MASTER_SITES</code>, <code>DYNAMIC_MASTER_SITES</code>, <code>DIST_SUBDIR</code>, <code>EXTRACT_SUFX</code>and <code>DISTFILES</code> are discussed in detail in <a href="https://www.netbsd.org/docs/pkgsrc/build.html#build.fetch">Section 13.5, “The <em>fetch</em> phase”</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The second section contains information about separately downloaded patches, if any.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PATCHFILES</code>: Name(s) of additional files that contain distribution patches. There is no default. pkgsrc will look for them at <code>PATCH_SITES</code>. They will automatically be uncompressed before patching if the names end with <code>.gz</code> or <code>.Z</code>.</p>
</li>
<li>
<p><code>PATCH_SITES</code>: Primary location(s) for distribution patch files (see <code>PATCHFILES</code> above) if not found locally.</p>
</li>
<li>
<p><code>PATCH_DIST_STRIP</code>: an argument to <a href="https://man.NetBSD.org/NetBSD-9.2/i386/patch.1">patch(1)</a> that sets the pathname strip count to help find the correct files to patch. It defaults to <strong>-p0</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The third section contains the following variables.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>MAINTAINER</code> is the email address of the person who feels responsible for this package, and who is most likely to look at problems or questions regarding this package which have been reported with <a href="https://man.NetBSD.org/NetBSD-9.2/i386/send-pr.1">send-pr(1)</a>. Other developers may contact the <code>MAINTAINER</code>before making changes to the package, but are not required to do so. When packaging a new program, set <code>MAINTAINER</code> to yourself. If you really can&#8217;t maintain the package for future updates, set it to <code>&lt;<a href="mailto:pkgsrc-users@NetBSD.org">pkgsrc-users@NetBSD.org</a>&gt;</code>.</p>
</li>
<li>
<p><code>OWNER</code> should be used instead of <code>MAINTAINER</code> when you do not want other developers to update or change the package without contacting you first. A package Makefile should contain one of <code>MAINTAINER</code> or <code>OWNER</code>, but not both.</p>
</li>
<li>
<p><code>HOMEPAGE</code> is a URL where users can find more information about the package.</p>
</li>
<li>
<p><code>COMMENT</code> is a one-line description of the package (should not include the package name).</p>
</li>
<li>
<p><code>LICENSE</code> indicates the license(s) applicable for the package. See <a href="https://www.netbsd.org/docs/pkgsrc/fixes.html#handling-licenses">Section 21.1.3, “Handling licenses”</a> for further details.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Other variables that affect the build:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>WRKSRC</code>: The directory where the interesting distribution files of the package are found. The default is <code>${WRKDIR}/${DISTNAME}</code>, which works for most packages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a package doesn&#8217;t create a subdirectory for itself (most GNU software does, for instance), but extracts itself in the current directory, you should set <code>WRKSRC=${WRKDIR}</code>.</p>
</div>
<div class="paragraph">
<p>If a package doesn&#8217;t create a subdirectory with the name of <code>DISTNAME</code> but some different name, set <code>WRKSRC</code> to point to the proper name in <code>${WRKDIR}</code>, for example <code>WRKSRC=${WRKDIR}/${DISTNAME}/unix</code>. See <a href="https://cdn.NetBSD.org/pub/pkgsrc/current/pkgsrc/lang/tcl/index.html"><code>lang/tcl</code></a> and <a href="https://cdn.NetBSD.org/pub/pkgsrc/current/pkgsrc/x11/tk/index.html"><code>x11/tk</code></a> for other examples.</p>
</div>
<div class="paragraph">
<p>The name of the working directory created by pkgsrc is taken from the <code>WRKDIR_BASENAME</code> variable. By default, its value is <code>work</code>. If you want to use the same pkgsrc tree for building different kinds of binary packages, you can change the variable according to your needs. Two other variables handle common cases of setting <code>WRKDIR_BASENAME</code> individually. If <code>OBJHOSTNAME</code> is defined in <a href="https://www.netbsd.org/docs/pkgsrc/configuring.html#mk.conf"><code>mk.conf</code></a>, the first component of the host&#8217;s name is attached to the directory name. If <code>OBJMACHINE</code> is defined, the platform name is attached, which might look like <code>work.i386</code> or <code>work.sparc</code>.</p>
</div>
<div class="paragraph">
<p>Please pay attention to the following gotchas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add <code>MANCOMPRESSED</code> if man pages are installed in compressed form by the package. For packages using BSD-style makefiles which honor MANZ, there is <code>MANCOMPRESSED_IF_MANZ</code>.</p>
</li>
<li>
<p>Replace <code>/usr/local</code> with “${PREFIX}” in all files (see patches, below).</p>
</li>
<li>
<p>If the package installs any info files, see <a href="https://www.netbsd.org/docs/pkgsrc/fixes.html#faq.info-files">Section 21.6.7, “Packages installing info files”</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_12_2_distinfo">12.2. distinfo</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>distinfo</code> file contains the message digest, or checksum, of each distfile needed for the package. This ensures that the distfiles retrieved from the Internet have not been corrupted during transfer or altered by a malign force to introduce a security hole. To provide maximum security, all distfiles are protected using three different message digest algorithms (SHA1,RMD160, SHA512), as well as the file size.</p>
</div>
<div class="paragraph">
<p>The <code>distinfo</code> file also contains the checksums for all the patches found in the <code>patches</code> directory (see <a href="https://www.netbsd.org/docs/pkgsrc/components.html#components.patches">Section 12.3, “<code>patches/*</code>”</a>). These checksums ensure that patches are only applied intentionally and that they don&#8217;t accidentally change, e.g. when merging different changes together. They also make sure that new patches are actually added to CVS and old ones are removed. Too see whether the patches and the <code>distinfo</code> file match, run <strong>pkglint</strong> after changing the patches.</p>
</div>
<div class="paragraph">
<p>To regenerate the <code>distinfo</code> file, use the <strong>make distinfo</strong> command.</p>
</div>
<div class="paragraph">
<p>Some packages have different sets of distfiles depending on the platform, for example <a href="https://cdn.NetBSD.org/pub/pkgsrc/current/pkgsrc/lang/openjdk8/index.html"><code>lang/openjdk8</code></a>. These are kept in the same <code>distinfo</code> file and care should be taken when upgrading such a package to ensure distfile information is not lost.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_12_3_patches">12.3. patches/*</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some packages don&#8217;t work out-of-the box on the various platforms that are supported by pkgsrc. These packages need to be patched to make them work. The patch files can be found in the <code>patches/</code> directory.</p>
</div>
<div class="paragraph">
<p>In the <em>patch</em> phase, these patches are applied to the files in <code>WRKSRC</code> directory after extracting them, in alphabetic order.</p>
</div>
<div class="sect2">
<h3 id="_12_3_1_structure_of_a_single_patch_file">12.3.1. Structure of a single patch file</h3>
<div class="paragraph">
<p>The <code>patch-*</code> files should be in <strong>diff -bu</strong> format, and apply without a fuzz to avoid problems. (To force patches to apply with fuzz you can set <code>PATCH_FUZZ_FACTOR=-F2</code>). Furthermore, each patch should contain only changes for a single file, and no file should be patched by more than one patch file. This helps to keep future modifications simple.</p>
</div>
<div class="paragraph">
<p>Each patch file is structured as follows: In the first line, there is the RCS Id of the patch itself. The second line should be empty for aesthetic reasons. After that, there should be a comment for each change that the patch does. There are a number of standard cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Patches for commonly known vulnerabilities should mention the vulnerability ID (CAN, CVE).</p>
</li>
<li>
<p>Patches that change source code should mention the platform and other environment (for example, the compiler) that the patch is needed for.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The patch should be commented so that any developer who knows the code of the application can make some use of the patch. Special care should be taken for the upstream developers, since we generally want that they accept our patches, so we have less work in the future.</p>
</div>
</div>
<div class="sect2">
<h3 id="_12_3_2_creating_patch_files">12.3.2. Creating patch files</h3>
<div class="paragraph">
<p>One important thing to mention is to pay attention that no RCS IDs get stored in the patch files, as these will cause problems when later checked into the NetBSD CVS tree. Use the <strong>pkgdiff</strong> command from the <a href="https://cdn.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgdiff/index.html"><code>pkgtools/pkgdiff</code></a> package to avoid these problems.</p>
</div>
<div class="paragraph">
<p>For even more automation, we recommend using <strong>mkpatches</strong> from the same package to make a whole set of patches. You just have to back up files before you edit them to <code>filename.orig</code>, e.g., with <strong>cp -p filename filename.orig</strong> or, easier, by using <strong>pkgvi</strong> again from the same package. If you upgrade a package this way, you can easily compare the new set of patches with the previously existing one with <strong>patchdiff</strong>. The files in <code>patches</code> are replaced by new files, so carefully check if you want to take all the changes.</p>
</div>
<div class="paragraph">
<p>When you have finished a package, remember to generate the checksums for the patch files by using the <strong>make makepatchsum</strong> command, see <a href="https://www.netbsd.org/docs/pkgsrc/components.html#components.distinfo">Section 12.2, “<code>distinfo</code>”</a>.</p>
</div>
<div class="paragraph">
<p>When adding a patch that corrects a problem in the  distfile (rather than e.g. enforcing pkgsrc&#8217;s view of where man pages should go), send the patch as a bug report to the maintainer. This benefits non-pkgsrc users of the package, and usually makes it possible to remove the patch in future version.</p>
</div>
<div class="paragraph">
<p>The file names of the patch files are usually of the form <code>patch-<em>path_to_file</em>with<em>underscores.c</code></em>. Many packages still use the previous convention <code>patch-<em>[a-z][a-z]</code></em>, but new patches should be of the form containing the filename. <strong>mkpatches</strong> included in <a href="https://cdn.NetBSD.org/pub/pkgsrc/current/pkgsrc/pkgtools/pkgdiff/index.html"><code>pkgtools/pkgdiff</code></a> takes care of the name automatically.</p>
</div>
<div class="paragraph">
<p>When updating pre-existing patch files, if a file uses the old <code>patch-<em>[a-z][a-z]</code></em> convention, it&#8217;s best not to change it to the new form, as that will just cause churn that makes it harder to track changes to patching over time. Similarly, if a patch now applies at different line offsets, but still applies cleanly as-is, there&#8217;s no need to update it, as that also unnecessarily complicates the patch history.</p>
</div>
</div>
<div class="sect2">
<h3 id="_12_3_3_sources_where_the_patch_files_come_from">12.3.3. Sources where the patch files come from</h3>
<div class="paragraph">
<p>If you want to share patches between multiple packages in pkgsrc, e.g. because they use the same distfiles, set <code>PATCHDIR</code> to the path where the patch files can be found, e.g.:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>PATCHDIR=       ../../editors/xemacs/patches</pre>
</div>
</div>
<div class="paragraph">
<p>Patch files that are distributed by the author or other maintainers can be listed in <code>PATCHFILES</code>.</p>
</div>
<div class="paragraph">
<p>If it is desired to store any patches that should not be committed into pkgsrc, they can be kept outside the pkgsrc tree in the <code>$LOCALPATCHES</code> directory. The directory tree there is expected to have the same “category/package” structure as pkgsrc, and patches are expected to be stored inside these dirs (also known as <code>$LOCALPATCHES/$PKGPATH</code>). For example, if you want to keep a private patch for <code>pkgsrc/graphics/png</code>, keep it in <code>$LOCALPATCHES/graphics/png/mypatch</code>. All files in the named directory are expected to be patch files, and <em>they are applied after pkgsrc patches are applied</em>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_12_3_4_patching_guidelines">12.3.4. Patching guidelines</h3>
<div class="paragraph">
<p>When fixing a portability issue in the code do not use preprocessor magic to check for the current operating system nor platform. Doing so hurts portability to other platforms because the OS-specific details are not abstracted appropriately.</p>
</div>
<div class="paragraph">
<p>The general rule to follow is: instead of checking for the operating system the application is being built on, check for the specific <em>features</em> you need. For example, instead of assuming that kqueue is available under NetBSD and using the <code><em>NetBSD</em></code> macro to conditionalize kqueue support, add a check that detects kqueue itself&#8201;&#8212;&#8201;yes, this generally involves patching the <strong>configure</strong> script. There is absolutely nothing that prevents some OSes from adopting interfaces from other OSes (e.g. Linux implementing kqueue), something that the above checks cannot take into account.</p>
</div>
<div class="paragraph">
<p>Of course, checking for features generally involves more work on the developer&#8217;s side, but the resulting changes are cleaner and there are chances they will work on many other platforms. Not to mention that there are higher chances of being later integrated into the mainstream sources. Remember: <em>It doesn&#8217;t work unless it is right!</em></p>
</div>
<div class="paragraph">
<p>Some typical examples:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Patching examples</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Where</th>
<th class="tableblock halign-left valign-top">Incorrect</th>
<th class="tableblock halign-left valign-top">Correct</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">configure script</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">case ${target_os} in netbsd*) have_kvm=yes ;; *) have_kvm=no;; esac</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AC_CHECK_LIB(kvm, kvm_open, have_kvm=yes, have_kvm=no)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C source file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#if defined(<em>NetBSD</em>) #  include &lt;sys/event.h&gt; #endif</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">#if defined(HAVE_SYS_EVENT_H) #  include &lt;sys/event.h&gt; #endif</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C source file</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int monitor_file(&#8230;&#8203;) { #if defined(<em>NetBSD</em>) int fd = kqueue(); &#8230;&#8203; #else &#8230;&#8203; #endif }</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int monitor_file(&#8230;&#8203;) { #if defined(HAVE_KQUEUE) int fd = kqueue(); &#8230;&#8203; #else &#8230;&#8203; #endif }</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_12_3_5_feedback_to_the_author">12.3.5. Feedback to the author</h3>
<div class="paragraph">
<p>Always, always, <strong>always</strong> feed back any <em>portability fixes</em> or improvements you do to a package to the mainstream developers. This is the only way to get their attention on portability issues and to ensure that future versions can be built out-of-the box on NetBSD. Furthermore, any user that gets newer distfiles will get the fixes straight from the packaged code.</p>
</div>
<div class="paragraph">
<p>This generally involves cleaning up the patches (because sometimes the patches that are added to pkgsrc are quick hacks), filing bug reports in the appropriate trackers for the projects and working with the mainstream authors to accept your changes. It is <em>extremely important</em> that you do it so that the packages in pkgsrc are kept simple and thus further changes can be done without much hassle.</p>
</div>
<div class="paragraph">
<p>When you have done this, please add a URL to the upstream bug report to the patch comment.</p>
</div>
<div class="paragraph">
<p>Support the idea of free software!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_12_4_other_mandatory_files">12.4. Other mandatory files</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>DESCR</code> A multi-line description of the piece of software. This should include any credits where they are due. Please bear in mind that others do not share your sense of humour (or spelling idiosyncrasies), and that others will read everything that you write here.</p>
</div>
<div class="paragraph">
<p><code>PLIST</code> This file governs the files that are installed on your system: all the binaries, manual pages, etc. There are other directives which may be entered in this file, to control the creation and deletion of directories, and the location of inserted files. See <a href="https://www.netbsd.org/docs/pkgsrc/plist.html">Chapter 19, PLIST issues</a> for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_12_5_optional_files">12.5. Optional files</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_12_5_1_files_affecting_the_binary_package">12.5.1. Files affecting the binary package</h3>
<div class="paragraph">
<p><code>INSTALL</code> This shell script is invoked twice by <a href="https://man.NetBSD.org/NetBSD-9.2/i386/pkg_add.1">pkg_add(1)</a>. First time after package extraction and before files are moved in place, the second time after the files to install are moved in place. This can be used to do any custom procedures not possible with @exec commands in <code>PLIST</code>. See <a href="https://man.NetBSD.org/NetBSD-9.2/i386/pkg_add.1">pkg_add(1)</a> and <a href="https://man.NetBSD.org/NetBSD-9.2/i386/pkg_create.1">pkg_create(1)</a> for more information. See also <a href="https://www.netbsd.org/docs/pkgsrc/pkginstall.html#files-and-dirs-outside-prefix">Section 20.1, “Files and directories outside the installation prefix”</a>. Please note that you can modify variables in it easily by using <code>FILES_SUBST</code> in the package&#8217;s <code>Makefile</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>FILES_SUBST+=  SOMEVAR="somevalue"</pre>
</div>
</div>
<div class="paragraph">
<p>replaces "@SOMEVAR@" with “somevalue” in the <code>INSTALL</code>. By default, substitution is performed for <code>PREFIX</code>, <code>LOCALBASE</code>, <code>X11BASE</code>, <code>VARBASE</code>, and a few others, type <strong>make help topic=FILES_SUBST</strong> for a complete list.</p>
</div>
<div class="paragraph">
<p><code>DEINSTALL</code> This script is executed before and after any files are removed. It is this script&#8217;s responsibility to clean up any additional messy details around the package&#8217;s installation, since all pkg_delete knows is how to delete the files created in the original distribution. See <a href="https://man.NetBSD.org/NetBSD-9.2/i386/pkg_delete.1">pkg_delete(1)</a> and <a href="https://man.NetBSD.org/NetBSD-9.2/i386/pkg_create.1">pkg_create(1)</a> for more information. The same methods to replace variables can be used as for the <code>INSTALL</code> file.</p>
</div>
<div class="paragraph">
<p><code>MESSAGE</code> This file is displayed after installation of the package. While this was used often in the past, it has two problems: the display will be missed if many packages are intalled at once, and the person installing the package and the one using or configuring it may be different. It should therefore be used only in exceptional circumstances where lasting negative consequences would result from someone not reading it.</p>
</div>
<div class="paragraph">
<p>MESSAGE should not be used for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>exhortations to read the documentation</p>
</li>
<li>
<p>reminders to install rc.d files and set variables</p>
</li>
<li>
<p>anything that should be explained in the installation/configuration documentation that should come with the package</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the documentation provided by upstream needs enhancing, create e.g. files/README.pkgsrc and install it in the package&#8217;s documentation directory.</p>
</div>
<div class="paragraph">
<p>Note that MESSAGE is shown for all operating systems and all init systems. If a MESSAGE is necessary, it should be narrowed to only those operating systems and init systems to which it applies.</p>
</div>
<div class="paragraph">
<p>Note that you can modify variables in it easily by using <code>MESSAGE_SUBST</code> in the package&#8217;s <code>Makefile</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>MESSAGE_SUBST+=  SOMEVAR="somevalue"</pre>
</div>
</div>
<div class="paragraph">
<p>replaces "${SOMEVAR}" with “somevalue” in <code>MESSAGE</code>. By default, substitution is performed for <code>PKGNAME</code>, <code>PKGBASE</code>, <code>PREFIX</code>, <code>LOCALBASE</code>, <code>X11BASE</code>, <code>PKG_SYSCONFDIR</code>, <code>ROOT_GROUP</code>, and <code>ROOT_USER</code>.</p>
</div>
<div class="paragraph">
<p>You can display a different or additional files by setting the <code>MESSAGE_SRC</code> variable. Its default is <code>MESSAGE</code>, if the file exists.</p>
</div>
<div class="paragraph">
<p><code>ALTERNATIVES</code> This file is used by the alternatives framework. It creates, configures, and destroys generic wrappers used to run programs with similar interfaces. See pkg_alternatives(8) from pkgtools/pkg_alternatives for more information.</p>
</div>
<div class="paragraph">
<p>Each line of the file contains two filenames, first the wrapper and then the alternative provided by the package. Both paths are relative to <code>PREFIX</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_12_5_2_files_affecting_the_build_process">12.5.2. Files affecting the build process</h3>
<div class="paragraph">
<p><code>Makefile.common</code> This file contains arbitrary things that could also go into a <code>Makefile</code>, but its purpose is to be used by more than one package. This file should only be used when the packages that will use the file are known in advance. For other purposes it is often better to write a  <code>*.mk</code> file and give it a good name that describes what it does.</p>
</div>
<div class="paragraph">
<p><code>buildlink3.mk</code> This file contains the dependency information for the buildlink3 framework (see <a href="https://www.netbsd.org/docs/pkgsrc/buildlink.html">Chapter 18, Buildlink methodology</a>).</p>
</div>
<div class="paragraph">
<p><code>hacks.mk</code> This file contains workarounds for compiler bugs and similar things. It is included automatically by the pkgsrc infrastructure, so you don&#8217;t need an extra <code>.include</code> line for it.</p>
</div>
<div class="paragraph">
<p><code>options.mk</code> This file contains the code for the package-specific options (see <a href="https://www.netbsd.org/docs/pkgsrc/options.html">Chapter 16, Options handling</a>) that can be selected by the user. If a package has only one or two options, it is equally acceptable to put the code directly into the <code>Makefile</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_12_5_3_files_affecting_nothing_at_all">12.5.3. Files affecting nothing at all</h3>
<div class="paragraph">
<p><code>README*</code> These files do not take place in the creation of a package and thus are purely informative to the package developer.</p>
</div>
<div class="paragraph">
<p><code>TODO</code> This file contains things that need to be done	to make the package even better.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_12_6_work">12.6. work*</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you type <strong>make</strong>, the distribution files are unpacked into the directory denoted by <code>WRKDIR</code>. It can be removed by running <strong>make clean</strong>. Besides the sources, this directory is also used to keep various timestamp files. The directory gets <em>removed completely</em> on clean. The default is <code>${.CURDIR}/work</code> or <code>${.CURDIR}/work.${MACHINE_ARCH}</code> if <code>OBJMACHINE</code> is set.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_12_7_files">12.7. files/*</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have any files that you wish to be placed in the package prior to configuration or building, you can place these files here and use a <strong>${CP}</strong> command in the “post-extract” target to achieve this.</p>
</div>
<div class="paragraph">
<p>If you want to share files in this way with other packages, set the <code>FILESDIR</code> variable to point to the other package&#8217;s <code>files</code> directory, e.g.:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>FILESDIR=       ../../editors/xemacs/files</pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-07-07 06:24:23 UTC
</div>
</div>
</body>
</html>